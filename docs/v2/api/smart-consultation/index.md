# 智能问诊

## 产品介绍

智能问诊模块是宠物健康辅助诊断工具，适用于宠物医疗机构、宠物主人及第三方健康管理平台。通过自然语言处理与图像识别能力，模块可协助用户完成宠物健康问题的初步分析与引导式问诊。

## 使用场景

- **宠物医院远程诊断**：兽医可以通过该模块对宠物健康问题进行初步分析，辅助远程诊断。
- **宠物主人家庭检查**：宠物主人可以在家中通过智能问诊模块咨询宠物健康问题。
- **宠物健康管理平台**：宠物健康管理应用可集成此功能，为用户提供宠物健康咨询服务。
- **宠物医疗教育**：可用于宠物医疗教育培训，帮助学习者识别不同的健康问题。
- **宠物保险评估**：宠物保险公司可利用该模块评估宠物健康状况，作为保险定价和理赔参考。

## 接口调用流程

完整的智能问诊流程包括以下主要阶段：

### 1. 会话开始
获取 session_id 开始会话流程，这是后续所有接口调用的基础。

### 2. 两轮问答
系统与用户进行引导式问答，收集宠物健康信息：
- 获取关键字（keywords接口）
- 获取推理文案（reason-info接口）
- 获取病情分析（analysis接口）
- 获取关联症状（related-question接口）
- 保存用户回答（history接口）

### 3. 判断是否需要继续提问
- 是否继续问答【流式】（if-continue-ask接口）
- 如果需要继续提问，则重复两轮问答流程

### 4. 判断是否需要传图
- 是否需要上传图片（if-need-image接口）
- 如果需要传图：
  - 上传文件（upload-image-oss接口）
  - 获取图片结果（pic-result接口）

### 5. 发布生成报告
- 生成小结（summary接口）
- 发布生成报告任务（report接口）

### 6. 获取报告
- 获取报告（medical-record接口）
- 获取报告列表（medical-record-list接口）

## 模块结构

```markdown
智能问诊
├── 流程开始
│   └── SessionStart
├── 两轮问答
│   ├── 获取关键字
│   ├── 获取推理文案
│   ├── 获取病情分析
│   ├── 获取关联症状
│   └── 保存用户回答
├── 判断是否需要继续提问
│   ├── 是否继续问答【流式】
│   └── 继续提问（如果需要）
├── 判断是否需要传图
│   ├── 是否需要上传图片
│   └── 需要传图时的上传与处理
└── 报告生成与获取
    ├── 生成小结
    ├── 发布生成报告任务
    ├── 获取报告
    └── 获取报告列表
```